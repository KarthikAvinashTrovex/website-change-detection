<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <title>FactSheet Downloads Simulation</title>
    <style>
      body { font-family: Arial, sans-serif; margin: 2em; }
      .docList { border: 1px solid #ccc; padding: 1em; margin-bottom: 1em; }
      .icon-PDF { margin-right: 0.5em; }
      .icon-Download { margin-left: 1em; }
      .badge { background: #ff0; padding: 2px 4px; font-size: 0.8rem; }
      .controls { margin-top: 2em; }
      .controls label { font-size: 1rem; }
      .controls input, .controls button { font-size: 1rem; padding: 0.3em; }
    </style>
  </head>
  <body>
    <!-- Simulated Document Container (with AngularJS attributes for simulation) -->
    <div class="docList ng-scope" ng-show="DivDisplay" id="docContainer" ng-repeat="doc in Documents">
      <span class="icon-PDF"></span>
      <p>
        <!-- PDF link and title come from Flask variables initially -->
        <a href="{{ pdf_link }}" target="_blank" id="pdfLink" ng-model="CheckDoc" ng-click="Checkdoc(doc)" class="ng-pristine ng-untouched ng-valid ng-binding ng-empty">
          {{ fact_sheet_text }} <span class="badge ng-hide" ng-hide="doc.isRead">New</span>
        </a>
      </p>
      <a href="{{ pdf_link }}" download id="downloadLink" class="icon-Download">Download PDF</a>
    </div>

    <!-- Controls for simulation -->
    <div class="controls">
      <label for="delayInput">Delay (seconds): </label>
      <input type="number" id="delayInput" value="60" min="1">
      <button id="simulateButton">Simulate Change</button>
    </div>

    <script>
      // Define our two states
      const janPdfLink = "{{ url_for('static', filename='ace.pdf') }}";
      const febPdfLink = "{{ url_for('static', filename='isecure.pdf') }}";
      const janText = "Passive Fund FactSheet for January";
      const febText = "Passive Fund FactSheet for February";

      // When the simulation button is pressed:
      document.getElementById('simulateButton').addEventListener('click', function() {
          // Read the delay in seconds and convert to milliseconds
          const delay = parseInt(document.getElementById('delayInput').value, 10) * 1000;
          
          // Optionally, disable the button to prevent re-clicking
          this.disabled = true;
          
          // Set a timeout to update the UI after the specified delay
          setTimeout(() => {
              // Update the view PDF link, download link, and the displayed text
              document.getElementById('pdfLink').href = febPdfLink;
              document.getElementById('pdfLink').textContent = febText + " ";
              document.getElementById('downloadLink').href = febPdfLink;
          }, delay);
      });
    </script>
  </body>
</html>
